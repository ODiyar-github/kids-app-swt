<div class="wrapper">
  <div class="viewer">
    <ng-container *ngIf="!user; else loggedInBlock">
      <div class="notLoggedIn">
        <p>Du bist noch nicht angemeldet</p>
        <button mat-raised-button [routerLink]="['/', routingEnum.LOGIN]">
          Anmelden
        </button>
      </div>
    </ng-container>

    <ng-template #loggedInBlock>
      <!-- Willkommen-Karte ganz oben -->
      <div class="welcome-container">
        <mat-card class="welcome-card">
          <mat-card-header>
            <mat-card-title>Willkommen {{ user?.firstName }}</mat-card-title>
          </mat-card-header>
        </mat-card>
      </div>

      <!-- Danach kommt das Grid -->
      <div class="community-grid">
        <!-- Linke Spalte -->
        <div class="left-panel">
          <mat-card class="recommendations-card">
            <mat-card-header>
              <mat-card-title>Empfohlene Veranstaltungen</mat-card-title>
            </mat-card-header>
            <mat-divider></mat-divider>

            <div class="dataList">
              <div
                class="eachList"
                *ngFor="let event of recommendations"
                [routerLink]="['/', routingEnum.EVENT, event.uuid]"
              >
                <app-event-preview [data]="event"></app-event-preview>
              </div>
            </div>

            <p *ngIf="recommendations.length === 0" class="empty-text">
              Keine passenden Veranstaltungen gefunden.
            </p>
          </mat-card>
        </div>

        <!-- Rechte Spalte -->
        <div class="right-panel">
          <mat-card class="activities-card">
            <mat-card-header>
              <mat-card-title>Neuigkeiten deiner Freunde</mat-card-title>
            </mat-card-header>
            <mat-divider></mat-divider>

            <mat-list class="activitiesItems" *ngIf="userNews.length > 0">
              <mat-list-item class="itemList" *ngFor="let log of userNews" [routerLink]="['/', routingEnum.EVENT, log.joinedEventId]">
                <div><mat-icon matListIcon>person</mat-icon> {{log.name}}</div>
                <div matLine class="activity-text">{{ log.message }}</div>
                <div class="timestamp">{{ log.date | date: 'short' }}</div>
              </mat-list-item>
            </mat-list>

            <p *ngIf="userNews.length === 0" class="empty-text">
              Deine Freunde haben noch keine AktivitÃ¤ten.
            </p>
          </mat-card>
        </div>
      </div>
    </ng-template>
  </div>
</div>
